{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{% static 'images/favicon.png' %}"
    />
    <title>Digital Dashboard</title>
    <!-- Custom CSS -->
    <link href="{% static 'css/float-chart.css' %}" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet" />
    <link href="{% static 'css/custom.css' %}" rel="stylesheet" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js' %}"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js' %}/1.4.2/respond.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    
  </head>

<body>
    
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css' %} -->
    <!-- ============================================================== -->
<!--    <div class="preloader">-->
<!--      <div class="lds-ripple">-->
<!--        <div class="lds-pos"></div>-->
<!--        <div class="lds-pos"></div>-->
<!--      </div>-->
<!--    </div>-->
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    
    <div id="main-wrapper">
      <!-- ============================================================== -->
      <!-- Topbar header - style you can find in pages.scss -->
      <!-- ============================================================== -->
      
      <!-- ============================================================== -->
      <!-- End Topbar header -->
      <!-- ============================================================== -->
      <!-- ============================================================== -->
      <!-- Left Sidebar - style you can find in sidebar.scss  -->
      <!-- ============================================================== -->
      <aside class="left-sidebar" data-sidebarbg="skin5">
        <!-- Sidebar scroll-->
        <div class="scroll-sidebar">
          <!-- Sidebar navigation-->
          <nav class="sidebar-nav">
            <ul id="sidebarnav" class="p-t-30">
              <li class="sidebar-item">
                <h4 class="sidebar-link waves-effect waves-dark"> <i class="material-icons">dashboard</i
                  > Data Zone</h4>
              </li>


              {% if user.is_authenticated %}
              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  aria-expanded="false"
                  ><span class="hide-menu"> Welcome {{ user.username }} ({{user.userprofile.user_type}}) </span></a>
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/home"
                  aria-expanded="false"
                  ><i class="material-icons">dashboard</i
                  ><span class="hide-menu">Dashboard </span></a
                >
              </li>
              <!-- <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/accounts/logout"
                  aria-expanded="false"
                  ><i class="material-icons">login</i><span class="hide-menu">Logout </span></a
                >
              </li> -->


              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="javascript:void(0)"
                  aria-expanded="false"
                  ><i class="material-icons">settings</i
                  ><span class="hide-menu">User Settings </span></a    
             
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/accounts/password_change"
                  aria-expanded="false"
                  ><i class="material-icons">login</i><span class="hide-menu">Change Password </span></a
                >
              </li>

              

              {% else %}
              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/accounts/login"
                  aria-expanded="false"
                  ><i class="material-icons">login</i><span class="hide-menu">Login </span></a
                >
              </li>
              {% endif %}
              
              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/statcollector"
                  aria-expanded="false"
                  ><i class="material-icons">logout</i><span class="hide-menu">Canadian Statistics </span></a
                >
              </li>


              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/graphgenerator"
                  aria-expanded="false"
                  ><i class="material-icons">dashboard</i><span class="hide-menu">Graph Generator </span></a
                >
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link waves-effect waves-dark"
                  href="/dashboard/accounts/logout"
                  aria-expanded="false"
                  ><i class="material-icons">logout</i><span class="hide-menu">Logout </span></a
                >
              </li>
    
              
            </ul>
          </nav>
        </div>
      </aside>

      <div class="page-wrapper">        
        
        <div class="content ">
            <div class="container-fluid">
             <h4><strong>Digital Dashboard</strong></h4><br>
                               
               

              <a href="/dashboard/home">Return to Dashboard Overview</a>
              <h2>Selected Province is <strong>"{{inputlocation}}" </strong></h2>
              <br><br>
             <div class="row">
                    <div class="col-sm-12">
                        <div class="card">
                        <div class="card-header ">
                            <h4 class="card-title">Special Education Enrolment by Exceptionality  </h4>
                        </div>
                        <div class="card-body">
                        <div id="exceptionalitystackedchart"></div>
                        </div>
                        </div>
                    </div>

                    <div class="col-sm-12">
                        <div class="card">
                        <div class="card-header ">
                            <h4 class="card-title">Special Education Enrolment by Exceptionality  </h4>
                        </div>
                        <div class="card-body">
                        <div id="boardachievementchart"></div>
                        </div>
                        </div>
                    </div>


                 </div>
               </div> 


         <br>

    <script>
        var exceptionalitykeys_for_x = {{ exceptionalitykeys | safe }}
        var elementaryvalues_for_y = {{ elementaryvalues | safe }}
        var secondaryvalues_for_y = {{ secondaryvalues | safe }}
        var totalvalues_for_y = {{ totalvalues | safe }}

        var boardkeys_for_x = {{ boardkeys | safe }}
        var gradetenossltvalues_for_y = {{ gradetenossltvalues | safe }}
        var gradesixeqaovalues_for_y = {{ gradesixeqaovalues | safe }}
        var fouryeargradvalues_for_y = {{ fouryeargradvalues | safe }}

        console.log(exceptionalitykeys_for_x)
        console.log(elementaryvalues_for_y)
        console.log(secondaryvalues_for_y)
        console.log(totalvalues_for_y)
        console.log(boardkeys_for_x)
        console.log(gradetenossltvalues_for_y)
        console.log(gradesixeqaovalues_for_y)
        console.log(fouryeargradvalues_for_y)

        var options = {
          series: [{
          name: 'Elementary Special Education Enrolment',
          data: elementaryvalues_for_y
        }, {
          name: 'Secondary Special Education Enrolment',
          data: secondaryvalues_for_y
        }, {
          name: 'Total Special Education Enrolment',
          data: totalvalues_for_y
        }],
          chart: {
          type: 'bar',
          height: 350
        },
        plotOptions: {
          bar: {
            horizontal: false,
            columnWidth: '55%',
            endingShape: 'rounded'
          },
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          show: true,
          width: 2,
          colors: ['transparent']
        },
        xaxis: {
          categories: exceptionalitykeys_for_x,
        },
        yaxis: {
          title: {
            text: 'Enrollment'
          }
        },
        fill: {
          opacity: 1
        },
        tooltip: {
          y: {
            formatter: function (val) {
              return val
            }
          }
        }
        };

        var exceptionalitychart = new ApexCharts(document.querySelector("#exceptionalitystackedchart"), options);
        exceptionalitychart.render();



        var options = {
          series: [{
          name: 'Grade 10 OSSLT Percentage',
          data: gradetenossltvalues_for_y
        }, {
          name: 'Grade Six EQAO Reading Percentage',
          data: gradesixeqaovalues_for_y
        }, {
          name: 'Four Year Graduation Percentage',
          data: fouryeargradvalues_for_y
        }],
          chart: {
          type: 'bar',
          height: 350,
          stacked: true,
          toolbar: {
            show: true
          },
          zoom: {
            enabled: true
          }
        },
        responsive: [{
          breakpoint: 480,
          options: {
            legend: {
              position: 'bottom',
              offsetX: -10,
              offsetY: 0
            }
          }
        }],
        plotOptions: {
          bar: {
            horizontal: false,
            borderRadius: 10
          },
        },
        xaxis: {
          categories: boardkeys_for_x,
        },
        legend: {
          position: 'right',
          offsetY: 40
        },
        fill: {
          opacity: 1
        }
        };

        var boardachivementchart = new ApexCharts(document.querySelector("#boardachievementchart"), options);
        boardachivementchart.render();


    </script>
</body>
